{"ast":null,"code":"var _jsxFileName = \"/home/mtogbe/42save/transcendence_box/pong/src/components/MultiplayerManager.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from 'react';\nimport GameBox from './GameBox';\nimport io from 'socket.io-client';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MultiplayerManager = props => {\n  _s();\n  const [infos, setInfos] = useState({\n    opponentX: 860,\n    opponentY: 200,\n    userId: Math.floor(Math.random() * 9999) + 1\n  });\n\n  // const socket = io('ws://localhost:8000');\n\n  useEffect(() => {\n    const socket = io.connect(\"http://localhost:8000\", {\n      query: {\n        userId: infos.userId\n      }\n    });\n    window.addEventListener('beforeunload', () => {\n      socket.disconnect();\n    });\n\n    // Listen to the 'connect' event\n    socket.on('connect', () => {\n      console.log('Connected to socket.io server');\n      console.log('User Id :' + infos.userId);\n    });\n    socket.on('connect_error', error => {\n      console.error('Failed to connect to socket.io server', error);\n    });\n\n    // Listen to the 'opponentMoved' event\n    socket.on('opponentMoved', data => {\n      setInfos({\n        opponentX: data.x,\n        opponentY: data.y\n      });\n    });\n\n    // Emit a 'playerMoved' event\n    // const handleMove = (x, y) => {\n    //    socket.emit('playerMoved', { x, y });\n    // }\n\n    // Clean up the event listeners when the component unmounts\n    return () => {\n      window.removeEventListener('beforeunload', () => {\n        socket.disconnect();\n      });\n      socket.off('connect');\n      socket.off('opponentMoved');\n      socket.disconnect();\n    };\n  }, [infos]);\n  return /*#__PURE__*/_jsxDEV(GameBox, {\n    height: props.height,\n    width: props.width,\n    opponentPosX: infos.opponentX,\n    opponentPosY: infos.opponentY\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 9\n  }, this);\n};\n_s(MultiplayerManager, \"oCP3QnCIB7UdZ0aEZYxqSvML0FM=\");\n_c = MultiplayerManager;\nexport default MultiplayerManager;\nvar _c;\n$RefreshReg$(_c, \"MultiplayerManager\");","map":{"version":3,"names":["useEffect","useState","GameBox","io","jsxDEV","_jsxDEV","MultiplayerManager","props","_s","infos","setInfos","opponentX","opponentY","userId","Math","floor","random","socket","connect","query","window","addEventListener","disconnect","on","console","log","error","data","x","y","removeEventListener","off","height","width","opponentPosX","opponentPosY","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/home/mtogbe/42save/transcendence_box/pong/src/components/MultiplayerManager.js"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport GameBox from './GameBox';\nimport io from 'socket.io-client'\n\n\n\n\nconst MultiplayerManager = (props) => {\n    const [infos, setInfos] = useState({\n        opponentX: 860,\n        opponentY: 200,\n        userId: Math.floor(Math.random() * 9999) + 1,\n        \n    })\n\n    // const socket = io('ws://localhost:8000');\n\n    useEffect(() => {\n        const socket=io.connect(\"http://localhost:8000\", {\n            query: {\n                userId: infos.userId\n            }\n        })\n        \n        window.addEventListener('beforeunload', () => {\n            socket.disconnect();\n          });\n\n        // Listen to the 'connect' event\n        socket.on('connect', () => {\n            console.log('Connected to socket.io server');\n            console.log('User Id :' + infos.userId);\n        });\n        \n        socket.on('connect_error', (error) => {\n            console.error('Failed to connect to socket.io server', error);\n        });\n        \n        // Listen to the 'opponentMoved' event\n        socket.on('opponentMoved', (data) => {\n           setInfos({\n              opponentX: data.x,\n              opponentY: data.y,\n           });\n        });\n        \n        // Emit a 'playerMoved' event\n        // const handleMove = (x, y) => {\n        //    socket.emit('playerMoved', { x, y });\n        // }\n        \n        // Clean up the event listeners when the component unmounts\n        return () => {\n            window.removeEventListener('beforeunload', () => {\n                socket.disconnect();\n              });\n           socket.off('connect');\n           socket.off('opponentMoved');\n           socket.disconnect();\n        };\n     }, [infos]);\n    \n    return (\n        <GameBox height={props.height} width={props.width}\n        opponentPosX={infos.opponentX} opponentPosY={infos.opponentY}>\n        </GameBox>\n    )\n}\n\n\n \nexport default MultiplayerManager;"],"mappings":";;AAAA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC3C,OAAOC,OAAO,MAAM,WAAW;AAC/B,OAAOC,EAAE,MAAM,kBAAkB;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAKjC,MAAMC,kBAAkB,GAAIC,KAAK,IAAK;EAAAC,EAAA;EAClC,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGT,QAAQ,CAAC;IAC/BU,SAAS,EAAE,GAAG;IACdC,SAAS,EAAE,GAAG;IACdC,MAAM,EAAEC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,EAAE,GAAG,IAAI,CAAC,GAAG;EAE/C,CAAC,CAAC;;EAEF;;EAEAhB,SAAS,CAAC,MAAM;IACZ,MAAMiB,MAAM,GAACd,EAAE,CAACe,OAAO,CAAC,uBAAuB,EAAE;MAC7CC,KAAK,EAAE;QACHN,MAAM,EAAEJ,KAAK,CAACI;MAClB;IACJ,CAAC,CAAC;IAEFO,MAAM,CAACC,gBAAgB,CAAC,cAAc,EAAE,MAAM;MAC1CJ,MAAM,CAACK,UAAU,EAAE;IACrB,CAAC,CAAC;;IAEJ;IACAL,MAAM,CAACM,EAAE,CAAC,SAAS,EAAE,MAAM;MACvBC,OAAO,CAACC,GAAG,CAAC,+BAA+B,CAAC;MAC5CD,OAAO,CAACC,GAAG,CAAC,WAAW,GAAGhB,KAAK,CAACI,MAAM,CAAC;IAC3C,CAAC,CAAC;IAEFI,MAAM,CAACM,EAAE,CAAC,eAAe,EAAGG,KAAK,IAAK;MAClCF,OAAO,CAACE,KAAK,CAAC,uCAAuC,EAAEA,KAAK,CAAC;IACjE,CAAC,CAAC;;IAEF;IACAT,MAAM,CAACM,EAAE,CAAC,eAAe,EAAGI,IAAI,IAAK;MAClCjB,QAAQ,CAAC;QACNC,SAAS,EAAEgB,IAAI,CAACC,CAAC;QACjBhB,SAAS,EAAEe,IAAI,CAACE;MACnB,CAAC,CAAC;IACL,CAAC,CAAC;;IAEF;IACA;IACA;IACA;;IAEA;IACA,OAAO,MAAM;MACTT,MAAM,CAACU,mBAAmB,CAAC,cAAc,EAAE,MAAM;QAC7Cb,MAAM,CAACK,UAAU,EAAE;MACrB,CAAC,CAAC;MACLL,MAAM,CAACc,GAAG,CAAC,SAAS,CAAC;MACrBd,MAAM,CAACc,GAAG,CAAC,eAAe,CAAC;MAC3Bd,MAAM,CAACK,UAAU,EAAE;IACtB,CAAC;EACJ,CAAC,EAAE,CAACb,KAAK,CAAC,CAAC;EAEZ,oBACIJ,OAAA,CAACH,OAAO;IAAC8B,MAAM,EAAEzB,KAAK,CAACyB,MAAO;IAACC,KAAK,EAAE1B,KAAK,CAAC0B,KAAM;IAClDC,YAAY,EAAEzB,KAAK,CAACE,SAAU;IAACwB,YAAY,EAAE1B,KAAK,CAACG;EAAU;IAAAwB,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,QACnD;AAElB,CAAC;AAAA/B,EAAA,CA5DKF,kBAAkB;AAAAkC,EAAA,GAAlBlC,kBAAkB;AAgExB,eAAeA,kBAAkB;AAAC,IAAAkC,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}