{"ast":null,"code":"var _jsxFileName = \"/home/mtogbe/42save/transcendence_box/pong/src/components/GameManager.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport styled from 'styled-components';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst START_TIMER = 3;\nconst GameManager = /*#__PURE__*/_s( /*#__PURE__*/React.forwardRef(_c = _s((props, ref) => {\n  _s();\n  const [timer, setTimer] = useState(START_TIMER);\n  useEffect(() => {\n    if (props.socket !== null) {\n      props.socket.on('ready-timer', server_timer => {\n        setTimer(server_timer);\n      });\n    }\n  }, [props.socket]);\n  useEffect(() => {\n    let intervalId;\n    if (timer > 0) {\n      if (props.socket === null) {\n        intervalId = setInterval(() => {\n          setTimer(timer - 1);\n        }, 1000);\n      }\n      if (ref.current) ref.current.innerText = \"Ready \\n\\t \" + timer;\n    } else if (ref.current && !ref.current.innerText.includes(\"Click to play\")) {\n      intervalId = setInterval(() => {\n        if (props.scoreRight.current.innerText === \"10\") ref.current.innerText = \"J2 wins ! \\n Click to quit\";else if (props.scoreLeft.current.innerText === \"10\") ref.current.innerText = \"J1 wins ! \\n Click to quit\";else ref.current.innerText = \"\";\n      }, 10);\n    }\n    return () => clearInterval(intervalId);\n  }, [timer, ref, props.scoreLeft, props.scoreRight, props.socket]);\n  const HandleReplay = () => {\n    if (ref.current.innerText.includes(\"Click to quit\")) {\n      props.scoreLeft.current.innerText = \"00\";\n      props.scoreRight.current.innerText = \"00\";\n      if (props.socket !== null) props.socket.emit('quitting');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(GameManagerDiv, {\n    onClick: HandleReplay,\n    ref: ref,\n    width: props.width,\n    height: props.height\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 9\n  }, this);\n}, \"VG6/7ir4yBFO4tj3sVSuPBUtVto=\")), \"VG6/7ir4yBFO4tj3sVSuPBUtVto=\");\n_c2 = GameManager;\nconst GameManagerDiv = styled.div`\n  height: 200px;\n  width: 1500px;\n  left: -250px;\n  text-align: center;\n  top: ${props => props.height / 2 - 150}px;\n  color: red;\n  @font-face {\n    font-family: 'Keania One';\n    src: url('../font/KeaniaOne-Regular.ttf') format('truetype');\n    font-weight: normal;\n    font-style: normal;\n  };\n  text-shadow: 2px 0 #fff, -2px 0 #fff, 0 2px #fff, 0 -2px #fff,\n               1px 1px #fff, -1px -1px #fff, 1px -1px #fff, -1px 1px #fff;\n  font-family: 'Keania One', sans-serif;\n  font-size: 128px;\n  position: absolute;\n`;\n_c3 = GameManagerDiv;\nexport default GameManager;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"GameManager$React.forwardRef\");\n$RefreshReg$(_c2, \"GameManager\");\n$RefreshReg$(_c3, \"GameManagerDiv\");","map":{"version":3,"names":["React","useEffect","useState","styled","jsxDEV","_jsxDEV","START_TIMER","GameManager","_s","forwardRef","_c","props","ref","timer","setTimer","socket","on","server_timer","intervalId","setInterval","current","innerText","includes","scoreRight","scoreLeft","clearInterval","HandleReplay","emit","GameManagerDiv","onClick","width","height","fileName","_jsxFileName","lineNumber","columnNumber","_c2","div","_c3","$RefreshReg$"],"sources":["/home/mtogbe/42save/transcendence_box/pong/src/components/GameManager.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport styled from 'styled-components';\r\n\r\nconst START_TIMER = 3;\r\n\r\nconst GameManager =  React.forwardRef((props, ref) =>  {\r\n    const [timer, setTimer] = useState(START_TIMER);\r\n\r\n    useEffect(() => {\r\n      if (props.socket !== null) {\r\n        props.socket.on('ready-timer', (server_timer) => {\r\n          setTimer(server_timer);\r\n        })\r\n      }\r\n    }, [props.socket])\r\n\r\n    useEffect(() => {\r\n        let intervalId;\r\n        if (timer > 0)\r\n        {\r\n            if (props.socket === null)\r\n            {\r\n              intervalId = setInterval(() => {\r\n                setTimer(timer - 1);\r\n              }, 1000);\r\n            }\r\n            if (ref.current)\r\n                ref.current.innerText = \"Ready \\n\\t \" + timer\r\n        }\r\n        else if (ref.current && !ref.current.innerText.includes(\"Click to play\"))\r\n        {\r\n            intervalId = setInterval(() => {\r\n                if (props.scoreRight.current.innerText === \"10\")\r\n                    ref.current.innerText = \"J2 wins ! \\n Click to quit\"\r\n                else if (props.scoreLeft.current.innerText === \"10\")\r\n                    ref.current.innerText = \"J1 wins ! \\n Click to quit\"\r\n                else\r\n                    ref.current.innerText = \"\"\r\n            }, 10);\r\n        }\r\n        return () => clearInterval(intervalId);\r\n      }, [timer, ref, props.scoreLeft, props.scoreRight, props.socket]);\r\n\r\n      const HandleReplay = () => { \r\n        if (ref.current.innerText.includes(\"Click to quit\"))\r\n        {\r\n            props.scoreLeft.current.innerText = \"00\";\r\n            props.scoreRight.current.innerText = \"00\";\r\n            if (props.socket !== null)\r\n              props.socket.emit('quitting');\r\n        }\r\n      }\r\n    \r\n      return (\r\n        <GameManagerDiv onClick={HandleReplay} ref={ref} width={props.width} height={props.height}></GameManagerDiv>\r\n        )\r\n\r\n      \r\n})\r\n\r\nconst GameManagerDiv = styled.div`\r\n  height: 200px;\r\n  width: 1500px;\r\n  left: -250px;\r\n  text-align: center;\r\n  top: ${(props) => (props.height / 2) - 150}px;\r\n  color: red;\r\n  @font-face {\r\n    font-family: 'Keania One';\r\n    src: url('../font/KeaniaOne-Regular.ttf') format('truetype');\r\n    font-weight: normal;\r\n    font-style: normal;\r\n  };\r\n  text-shadow: 2px 0 #fff, -2px 0 #fff, 0 2px #fff, 0 -2px #fff,\r\n               1px 1px #fff, -1px -1px #fff, 1px -1px #fff, -1px 1px #fff;\r\n  font-family: 'Keania One', sans-serif;\r\n  font-size: 128px;\r\n  position: absolute;\r\n`;\r\n\r\nexport default GameManager;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}