{"ast":null,"code":"var _jsxFileName = \"/home/mtogbe/42save/transcendence_box/pong/src/components/Character.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport styled from 'styled-components';\nimport birdImg from '../img/Player 1.png';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ACCELERATION = 10;\nconst MAX_SPEED = ACCELERATION * 2;\nconst BIRD_WIDTH = 31;\nconst BIRD_HEIGHT = 218;\nconst PLAYERMODE = 1;\nconst OPPONENTMODE = 2;\nconst Character = /*#__PURE__*/_s( /*#__PURE__*/React.forwardRef(_c = _s((props, ref) => {\n  _s();\n  const [characterPosition, setCharacterPosition] = useState({\n    x: props.x,\n    y: props.y\n  });\n  const [characterSpeed, setCharacterSpeed] = useState({\n    x: 0,\n    y: 0\n  });\n  let [isKeyDown, setIsKeyDown] = useState(false);\n  useEffect(() => {\n    const handleKeyDown = event => {\n      setIsKeyDown(true);\n      switch (event.key.toLowerCase()) {\n        case props.controlMode === PLAYERMODE ? 'arrowup' : 'w':\n          setCharacterSpeed(prevSpeed => ({\n            x: prevSpeed.x,\n            y: Math.max(prevSpeed.y - ACCELERATION, -MAX_SPEED)\n          }));\n          break;\n        case props.controlMode === PLAYERMODE ? 'arrowup' : 'z':\n          setCharacterSpeed(prevSpeed => ({\n            x: prevSpeed.x,\n            y: Math.max(prevSpeed.y - ACCELERATION, -MAX_SPEED)\n          }));\n          break;\n        case props.controlMode === PLAYERMODE ? 'arrowdown' : 's':\n          setCharacterSpeed(prevSpeed => ({\n            x: prevSpeed.x,\n            y: Math.min(prevSpeed.y + ACCELERATION, MAX_SPEED)\n          }));\n          break;\n        default:\n          break;\n      }\n    };\n    const handleKeyUp = event => {\n      switch (event.key.toLowerCase()) {\n        case props.controlMode === PLAYERMODE ? 'arrowup' : 'w':\n          setCharacterSpeed({\n            x: 0,\n            y: 0\n          });\n          setIsKeyDown(false);\n          break;\n        case props.controlMode === PLAYERMODE ? 'arrowup' : 'z':\n          setCharacterSpeed({\n            x: 0,\n            y: 0\n          });\n          setIsKeyDown(false);\n          break;\n        case props.controlMode === PLAYERMODE ? 'arrowdown' : 's':\n          setCharacterSpeed({\n            x: 0,\n            y: 0\n          });\n          setIsKeyDown(false);\n          break;\n        default:\n          break;\n      }\n    };\n    if (props.controlMode === PLAYERMODE || props.controlMode === OPPONENTMODE) {\n      window.addEventListener('keydown', handleKeyDown);\n      window.addEventListener('keyup', handleKeyUp);\n      return () => {\n        window.removeEventListener('keydown', handleKeyDown);\n        window.removeEventListener('keyup', handleKeyUp);\n      };\n    }\n  }, [characterPosition, props.controlMode]);\n  useEffect(() => {\n    if (isKeyDown) {\n      const intervalId = setInterval(() => {\n        setCharacterPosition(prevPosition => ({\n          x: prevPosition.x + characterSpeed.x,\n          y: Math.min(Math.max(prevPosition.y + characterSpeed.y, 30), 430)\n        }));\n        if (props.socket !== null) {\n          props.socket.emit(\"player-moved\", props.userId, characterPosition);\n        }\n      }, 16);\n      return () => {\n        clearInterval(intervalId);\n      };\n    }\n  }, [characterSpeed, isKeyDown, props.socket, characterPosition, props.userId]);\n  return /*#__PURE__*/_jsxDEV(CharacterDiv, {\n    ref: ref,\n    height: BIRD_HEIGHT,\n    width: BIRD_WIDTH,\n    x: characterPosition.x,\n    y: characterPosition.y\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 94,\n    columnNumber: 7\n  }, this);\n}, \"0RXoG/gq0TR8ThmX9DhUGXmSOFU=\")), \"0RXoG/gq0TR8ThmX9DhUGXmSOFU=\");\n_c2 = Character;\nconst CharacterDiv = styled.div.attrs(props => ({\n  style: {\n    position: 'absolute',\n    backgroundImage: `url(${birdImg})`,\n    backgroundColor: 'red',\n    height: `${props.height}px`,\n    width: `${props.width}px`,\n    left: `${props.x}px`,\n    top: `${props.y}px`,\n    borderRadius: '0%'\n  }\n}))``;\n_c3 = CharacterDiv;\nexport default Character;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"Character$React.forwardRef\");\n$RefreshReg$(_c2, \"Character\");\n$RefreshReg$(_c3, \"CharacterDiv\");","map":{"version":3,"names":["React","useEffect","useState","styled","birdImg","jsxDEV","_jsxDEV","ACCELERATION","MAX_SPEED","BIRD_WIDTH","BIRD_HEIGHT","PLAYERMODE","OPPONENTMODE","Character","_s","forwardRef","_c","props","ref","characterPosition","setCharacterPosition","x","y","characterSpeed","setCharacterSpeed","isKeyDown","setIsKeyDown","handleKeyDown","event","key","toLowerCase","controlMode","prevSpeed","Math","max","min","handleKeyUp","window","addEventListener","removeEventListener","intervalId","setInterval","prevPosition","socket","emit","userId","clearInterval","CharacterDiv","height","width","fileName","_jsxFileName","lineNumber","columnNumber","_c2","div","attrs","style","position","backgroundImage","backgroundColor","left","top","borderRadius","_c3","$RefreshReg$"],"sources":["/home/mtogbe/42save/transcendence_box/pong/src/components/Character.js"],"sourcesContent":["\r\nimport React, { useEffect, useState } from 'react';\r\nimport styled from 'styled-components';\r\nimport birdImg from '../img/Player 1.png';\r\n\r\nconst ACCELERATION = 10;\r\nconst MAX_SPEED = ACCELERATION * 2;\r\nconst BIRD_WIDTH = 31;\r\nconst BIRD_HEIGHT = 218;\r\nconst PLAYERMODE = 1;\r\nconst OPPONENTMODE = 2;\r\n\r\nconst Character = React.forwardRef((props, ref) => {\r\n    const [characterPosition, setCharacterPosition] = useState({ x: props.x, y: props.y });\r\n    const [characterSpeed, setCharacterSpeed] = useState({ x: 0, y: 0 });\r\n    let [isKeyDown, setIsKeyDown] = useState(false);\r\n    \r\n    useEffect(() => {\r\n      const handleKeyDown = (event) => {\r\n        setIsKeyDown(true);\r\n        switch (event.key.toLowerCase()) {\r\n          case props.controlMode === PLAYERMODE ? 'arrowup' : 'w':\r\n            setCharacterSpeed((prevSpeed) => ({\r\n              x: prevSpeed.x,\r\n              y: Math.max(prevSpeed.y - ACCELERATION, -MAX_SPEED),\r\n            }));\r\n            break;\r\n          case props.controlMode === PLAYERMODE ? 'arrowup' : 'z':\r\n            setCharacterSpeed((prevSpeed) => ({\r\n              x: prevSpeed.x,\r\n              y: Math.max(prevSpeed.y - ACCELERATION, -MAX_SPEED),\r\n            }));\r\n            break;\r\n          case props.controlMode === PLAYERMODE ? 'arrowdown' : 's':\r\n            setCharacterSpeed((prevSpeed) => ({\r\n              x: prevSpeed.x,\r\n              y: Math.min(prevSpeed.y + ACCELERATION, MAX_SPEED),\r\n            }));\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n      };\r\n  \r\n      const handleKeyUp = (event) => {\r\n        switch (event.key.toLowerCase()) {\r\n          case props.controlMode === PLAYERMODE ? 'arrowup' : 'w':\r\n            setCharacterSpeed({ x: 0, y: 0 });\r\n            setIsKeyDown(false);\r\n            break;\r\n          case props.controlMode === PLAYERMODE ? 'arrowup' : 'z':\r\n            setCharacterSpeed({ x: 0, y: 0 });\r\n            setIsKeyDown(false);\r\n            break;\r\n          case props.controlMode === PLAYERMODE ? 'arrowdown' : 's':\r\n            setCharacterSpeed({ x: 0, y: 0 });\r\n            setIsKeyDown(false);\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n      };\r\n      if (props.controlMode === PLAYERMODE || props.controlMode === OPPONENTMODE)\r\n      {\r\n        window.addEventListener('keydown', handleKeyDown);\r\n        window.addEventListener('keyup', handleKeyUp);\r\n    \r\n        return () => {\r\n          window.removeEventListener('keydown', handleKeyDown);\r\n          window.removeEventListener('keyup', handleKeyUp);\r\n        };\r\n      }\r\n    }, [characterPosition, props.controlMode]);\r\n  \r\n    useEffect(() => {\r\n      if (isKeyDown) {\r\n          const intervalId = setInterval(() => {\r\n            setCharacterPosition((prevPosition) => ({\r\n              x: prevPosition.x + characterSpeed.x,\r\n              y: Math.min(Math.max(prevPosition.y + characterSpeed.y, 30), 430)\r\n            }));\r\n            if (props.socket !== null)\r\n            {\r\n              props.socket.emit(\"player-moved\", props.userId, characterPosition);\r\n            }\r\n          }, 16);\r\n          return () => {\r\n            clearInterval(intervalId);\r\n          };\r\n      }\r\n    }, [characterSpeed, isKeyDown, props.socket, characterPosition, props.userId]);\r\n    \r\n    return (\r\n      <CharacterDiv ref={ref} height={BIRD_HEIGHT} width={BIRD_WIDTH} x={characterPosition.x} y={characterPosition.y} />\r\n    );\r\n  });\r\n  \r\n\r\n  const CharacterDiv = styled.div.attrs((props) => ({\r\n    style: {\r\n      position: 'absolute',\r\n      backgroundImage: `url(${birdImg})`,\r\n      backgroundColor: 'red',\r\n      height: `${props.height}px`,\r\n      width: `${props.width}px`,\r\n      left: `${props.x}px`,\r\n      top: `${props.y}px`,\r\n      borderRadius: '0%',\r\n    },\r\n  }))``;\r\n\r\nexport default Character;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}